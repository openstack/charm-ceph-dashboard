local_overlay_enabled: False
series: hirsute
applications:
  ceph-osd:
    charm: cs:~openstack-charmers/ceph-osd
    num_units: 6
    storage:
      osd-devices: 'cinder,10G'
    options:
      osd-devices: '/dev/test-non-existent'
  ceph-mon:
    charm: cs:~openstack-charmers/ceph-mon
    num_units: 3
    options:
      monitor-count: '3'
  vault:
    num_units: 1
    charm: cs:~openstack-charmers/vault
  mysql-innodb-cluster:
    charm: cs:~openstack-charmers/mysql-innodb-cluster
    constraints: mem=3072M
    num_units: 3
  vault-mysql-router:
    charm: cs:~openstack-charmers/mysql-router
  ceph-dashboard:
    charm: ../../ceph-dashboard.charm
    options:
      public-hostname: 'ceph-dashboard.zaza.local'
  ceph-radosgw-east:
    charm: cs:~openstack-charmers/ceph-radosgw
    num_units: 3
    options:
      pool-prefix: east
      region: east
  ceph-radosgw-west:
    charm: cs:~openstack-charmers/ceph-radosgw
    num_units: 3
    options:
      pool-prefix: west
      region: west
  ceph-fs:
    charm: cs:~openstack-charmers/ceph-fs
    num_units: 1
relations:
  - - 'ceph-osd:mon'
    - 'ceph-mon:osd'
  - - 'vault:shared-db'
    - 'vault-mysql-router:shared-db'
  - - 'vault-mysql-router:db-router'
    - 'mysql-innodb-cluster:db-router'
  - - 'ceph-dashboard:dashboard'
    - 'ceph-mon:dashboard'
  - - 'ceph-dashboard:certificates'
    - 'vault:certificates'
  - - 'ceph-radosgw-east:mon'
    - 'ceph-mon:radosgw'
  - - 'ceph-radosgw-east:certificates'
    - 'vault:certificates'
  - - 'ceph-dashboard:radosgw-dashboard'
    - 'ceph-radosgw-east:radosgw-user'
  - - 'ceph-radosgw-west:mon'
    - 'ceph-mon:radosgw'
  - - 'ceph-radosgw-west:certificates'
    - 'vault:certificates'
  - - 'ceph-dashboard:radosgw-dashboard'
    - 'ceph-radosgw-west:radosgw-user'
  - - 'ceph-mon:mds'
    - 'ceph-fs:ceph-mds'
